
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Python API toolkit for CellEngine" name="description"/>
<link href="https://primitybio.github.io/cellengine-python-toolkit/statistics/" rel="canonical"/>
<meta content="Zach Bjornson, Gerrit Egnew" name="author"/>
<link href="../images/favicon.ico" rel="shortcut icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-5.5.0" name="generator"/>
<title>Statistics - CellEngine Python Toolkit</title>
<link href="../assets/stylesheets/main.b5d04df8.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.9ab2c1f8.min.css" rel="stylesheet"/>
<meta content="#3f51b5" name="theme-color"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#statistics">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header-nav md-grid">
<a aria-label="CellEngine Python Toolkit" class="md-header-nav__button md-logo" href="https://primitybio.github.io/cellengine-python-toolkit/" title="CellEngine Python Toolkit">
<img alt="logo" src="../images/logo.svg"/>
</a>
<label class="md-header-nav__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header-nav__title" data-md-component="header-title">
<div class="md-header-nav__ellipsis">
<span class="md-header-nav__topic md-ellipsis">
            CellEngine Python Toolkit
          </span>
<span class="md-header-nav__topic md-ellipsis">
            
              Statistics
            
          </span>
</div>
</div>
<label class="md-header-nav__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header-nav__source">
<a class="md-source" href="https://github.com/primitybio/cellengine-python-toolkit/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    primitybio/cellengine-pythoon-toolkit
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="CellEngine Python Toolkit" class="md-nav__button md-logo" href="https://primitybio.github.io/cellengine-python-toolkit/" title="CellEngine Python Toolkit">
<img alt="logo" src="../images/logo.svg"/>
</a>
    CellEngine Python Toolkit
  </label>
<div class="md-nav__source">
<a class="md-source" href="https://github.com/primitybio/cellengine-python-toolkit/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"></path></svg>
</div>
<div class="md-source__repository">
    primitybio/cellengine-pythoon-toolkit
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href=".." title="Home">
      Home
    </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" data-md-toggle="nav-2" id="nav-2" type="checkbox"/>
<label class="md-nav__link" for="nav-2">
      Resources
      <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"></path></svg>
</span>
</label>
<nav aria-label="Resources" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="nav-2">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
        Resources
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../api_client/" title="API Client">
      API Client
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../attachments/" title="Attachments">
      Attachments
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../compensations/" title="Compensations">
      Compensations
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../experiments/" title="Experiments">
      Experiments
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../fcs_files/" title="FcsFiles">
      FcsFiles
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../gates/" title="Gates">
      Gates
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../plots/" title="Plots">
      Plots
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../populations/" title="Populations">
      Populations
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
        Statistics
        <span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"></path></svg>
</span>
</label>
<a class="md-nav__link md-nav__link--active" href="./" title="Statistics">
      Statistics
    </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#cellengine.utils.api_client.APIClient.APIClient.get_statistics">
    get_statistics()
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../scalesets/" title="ScaleSets">
      ScaleSets
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../recipes/" title="Cookbook">
      Cookbook
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../contributing/" title="Development">
      Development
    </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#cellengine.utils.api_client.APIClient.APIClient.get_statistics">
    get_statistics()
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<a class="md-content__button md-icon" href="https://github.com/primitybio/cellengine-python-toolkit/edit/master/docs/statistics.md" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"></path></svg>
</a>
<h1 id="statistics">Statistics</h1>
<p><a href="https://docs.cellengine.com/api/#statistics">CellEngine API: Statistics</a></p>
<p>Programmatically use CellEngine for statistical analysis.</p>
<div class="doc doc-object doc-method">
<h2 class="doc doc-heading" id="cellengine.utils.api_client.APIClient.APIClient.get_statistics">
<code class="highlight language-python">
cellengine.utils.api_client.APIClient.APIClient.get_statistics<span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">experiment_id</span><span class="p">,</span> <span class="n">statistics</span><span class="p">,</span> <span class="n">channels</span><span class="p">,</span> <span class="n">q</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">annotations</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">compensation_id</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fcs_file_ids</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">'json'</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">percent_of</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">population_ids</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> </code>
</h2>
<div class="doc doc-contents first">
<p>Request Statistics from CellEngine.</p>
<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>experiment_id</code></td>
<td><code>str</code></td>
<td>
<p>ID of experiment to request statistics for.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>statistics</code></td>
<td><code>Union[str, List[str]]</code></td>
<td>
<p>Statistical method to request. Any of "mean", "median",
"quantile", "mad" (median absolute deviation), "geometricmean",
"eventcount", "cv", "stddev" or "percent" (case-insensitive).</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>q</code></td>
<td><code>float</code></td>
<td>
<p>int: quantile (required for "quantile" statistic)</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>channels</code></td>
<td><code>List[str]</code></td>
<td>
<p>str or List[str]: for "mean", "median", "geometricMean", "cv",
"stddev", "mad" or "quantile" statistics. Names of
channels to calculate statistics for.</p>
</td>
<td><em>required</em></td>
</tr>
<tr>
<td><code>annotations</code></td>
<td><code>Optional[bool]</code></td>
<td>
<p>bool: Include file annotations in output
(defaults to False).</p>
</td>
<td><code>False</code></td>
</tr>
<tr>
<td><code>compensation_id</code></td>
<td><code>Optional[str]</code></td>
<td>
<p>str: Compensation to use for gating and statistic
calculation.
Defaults to uncompensated. Three special constants may be used:
    0: Uncompensated
    -1: File-Internal Compensation Uses the file's internal compensation
        matrix, if available. If not, an error will be returned.
    -2: Per-File Compensation Use the compensation assigned to each
        individual FCS file.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>fcs_file_ids</code></td>
<td><code>Optional[List[str]]</code></td>
<td>
<p>List[str]: FCS files to get statistics for. If
omitted, statistics for all non-control FCS files will be returned.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>format</code></td>
<td><code>Optional[str]</code></td>
<td>
<p>str: One of "TSV (with[out] header)",
"CSV (with[out] header)" or "json" (default), "pandas", case-insensitive.</p>
</td>
<td><code>'json'</code></td>
</tr>
<tr>
<td><code>layout</code></td>
<td><code>Optional[str]</code></td>
<td>
<p>str: The file (TSV/CSV) or object (JSON) layout.
One of "tall-skinny", "medium", or "short-wide".</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>percent_of</code></td>
<td><code>Optional[Union[str, List[str]]]</code></td>
<td>
<p>str or List[str]: Population ID or array of
population IDs.  If omitted or the string "PARENT", will calculate
percent of parent for each population. If a single ID, will calculate
percent of that population for all populations specified by
population_ids. If a list, will calculate percent of each of
those populations.</p>
</td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>population_ids</code></td>
<td><code>Optional[List[str]]</code></td>
<td>
<p>List[str]: List of population IDs.
Defaults to ungated.</p>
</td>
<td><code>None</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>statistics</code></td>
<td>
<p>Dict, String, or pandas.Dataframe</p>
</td>
</tr>
</tbody>
</table>
<details class="quote">
<summary>Source code in <code>cellengine/utils/api_client/APIClient.py</code></summary>
<table class="highlighttable">
<tr>
<td class="linenos">
<div class="linenodiv">
<pre><span></span>383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483</pre>
</div>
</td>
<td class="code">
<div class="highlight">
<pre><span></span><code><span class="k">def</span> <span class="nf">get_statistics</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">experiment_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">statistics</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
    <span class="n">channels</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
    <span class="n">q</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">annotations</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">compensation_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">fcs_file_ids</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="nb">format</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"json"</span><span class="p">,</span>
    <span class="n">layout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">percent_of</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">population_ids</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">"""</span>
<span class="sd">    Request Statistics from CellEngine.</span>

<span class="sd">    Args:</span>
<span class="sd">        experiment_id: ID of experiment to request statistics for.</span>
<span class="sd">        statistics: Statistical method to request. Any of "mean", "median",</span>
<span class="sd">            "quantile", "mad" (median absolute deviation), "geometricmean",</span>
<span class="sd">            "eventcount", "cv", "stddev" or "percent" (case-insensitive).</span>
<span class="sd">        q: int: quantile (required for "quantile" statistic)</span>
<span class="sd">        channels: str or List[str]: for "mean", "median", "geometricMean", "cv",</span>
<span class="sd">            "stddev", "mad" or "quantile" statistics. Names of</span>
<span class="sd">            channels to calculate statistics for.</span>
<span class="sd">        annotations (optional): bool: Include file annotations in output</span>
<span class="sd">            (defaults to False).</span>
<span class="sd">        compensation_id (optional): str: Compensation to use for gating and statistic</span>
<span class="sd">            calculation.</span>
<span class="sd">            Defaults to uncompensated. Three special constants may be used:</span>
<span class="sd">                0: Uncompensated</span>
<span class="sd">                -1: File-Internal Compensation Uses the file's internal compensation</span>
<span class="sd">                    matrix, if available. If not, an error will be returned.</span>
<span class="sd">                -2: Per-File Compensation Use the compensation assigned to each</span>
<span class="sd">                    individual FCS file.</span>
<span class="sd">        fcs_file_ids (optional): List[str]: FCS files to get statistics for. If</span>
<span class="sd">            omitted, statistics for all non-control FCS files will be returned.</span>
<span class="sd">        format (optional): str: One of "TSV (with[out] header)",</span>
<span class="sd">            "CSV (with[out] header)" or "json" (default), "pandas", case-insensitive.</span>
<span class="sd">        layout (optional): str: The file (TSV/CSV) or object (JSON) layout.</span>
<span class="sd">            One of "tall-skinny", "medium", or "short-wide".</span>
<span class="sd">        percent_of (optional): str or List[str]: Population ID or array of</span>
<span class="sd">            population IDs.  If omitted or the string "PARENT", will calculate</span>
<span class="sd">            percent of parent for each population. If a single ID, will calculate</span>
<span class="sd">            percent of that population for all populations specified by</span>
<span class="sd">            population_ids. If a list, will calculate percent of each of</span>
<span class="sd">            those populations.</span>
<span class="sd">        population_ids (optional): List[str]: List of population IDs.</span>
<span class="sd">            Defaults to ungated.</span>
<span class="sd">    Returns:</span>
<span class="sd">        statistics: Dict, String, or pandas.Dataframe</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="nf">determine_format</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">f</span> <span class="o">==</span> <span class="s2">"pandas"</span><span class="p">:</span>
            <span class="k">return</span> <span class="s2">"json"</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">f</span>

    <span class="k">if</span> <span class="s2">"quantile"</span> <span class="o">==</span> <span class="n">statistics</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">q</span>
        <span class="k">except</span> <span class="ne">AssertionError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">"'q' is a required parameter for 'quantile' statistics."</span>
            <span class="p">)</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">"statistics"</span><span class="p">:</span> <span class="n">statistics</span><span class="p">,</span>
        <span class="s2">"q"</span><span class="p">:</span> <span class="n">q</span><span class="p">,</span>
        <span class="s2">"channels"</span><span class="p">:</span> <span class="n">channels</span><span class="p">,</span>
        <span class="s2">"annotations"</span><span class="p">:</span> <span class="n">annotations</span><span class="p">,</span>
        <span class="s2">"compensationId"</span><span class="p">:</span> <span class="n">compensation_id</span><span class="p">,</span>
        <span class="s2">"fcsFileIds"</span><span class="p">:</span> <span class="n">fcs_file_ids</span><span class="p">,</span>
        <span class="s2">"format"</span><span class="p">:</span> <span class="n">determine_format</span><span class="p">(</span><span class="nb">format</span><span class="p">),</span>
        <span class="s2">"layout"</span><span class="p">:</span> <span class="n">layout</span><span class="p">,</span>
        <span class="s2">"percentOf"</span><span class="p">:</span> <span class="n">percent_of</span><span class="p">,</span>
        <span class="s2">"populationIds"</span><span class="p">:</span> <span class="n">population_ids</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">req_params</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">val</span> <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">params</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>

    <span class="n">raw_stats</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_post</span><span class="p">(</span>
        <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">endpoint_base</span><span class="si">}</span><span class="s2">/experiments/</span><span class="si">{</span><span class="n">experiment_id</span><span class="si">}</span><span class="s2">/bulkstatistics"</span><span class="p">,</span>
        <span class="n">json</span><span class="o">=</span><span class="n">req_params</span><span class="p">,</span>
        <span class="n">raw</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="nb">format</span> <span class="o">=</span> <span class="nb">format</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">"json"</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">raw_stats</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s2">"sv"</span> <span class="ow">in</span> <span class="nb">format</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">raw_stats</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Invalid output format </span><span class="si">{}</span><span class="s2">"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">format</span><span class="p">),</span> <span class="n">e</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="s2">"pandas"</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">pandas</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">raw_stats</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Invalid data format </span><span class="si">{}</span><span class="s2"> for pandas"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">format</span><span class="p">),</span> <span class="n">e</span><span class="p">)</span>
</code></pre>
</div>
</td>
</tr>
</table>
</details>
</div>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav aria-label="Footer" class="md-footer-nav__inner md-grid">
<a class="md-footer-nav__link md-footer-nav__link--prev" href="../populations/" rel="prev" title="Populations">
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                Populations
              </div>
</div>
</a>
<a class="md-footer-nav__link md-footer-nav__link--next" href="../scalesets/" rel="next" title="ScaleSets">
<div class="md-footer-nav__title">
<div class="md-ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                ScaleSets
              </div>
</div>
<div class="md-footer-nav__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
</div>
</div>
</footer>
</div>
<script src="../assets/javascripts/vendor.92ffa368.min.js"></script>
<script src="../assets/javascripts/bundle.5123e3d4.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
<script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
</body>
</html>